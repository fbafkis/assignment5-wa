CREATE TABLE ACCOMMODATIONS
(
	ID BIGINT AUTO_INCREMENT,
	NAME VARCHAR NOT NULL,
	PRICE INT NOT NULL,
	TYPE INT NOT NULL,
	CONSTRAINT ACCOMMODATIONS_PK
		PRIMARY KEY (ID)
);

CREATE TABLE APARTMENTS
(
	ID BIGINT,
	CLEANING_PRICE INT NOT NULL,
	MAX_PERSONS INT NOT NULL,
	CONSTRAINT APARTMENTS_PK
		PRIMARY KEY (ID)
);

CREATE TABLE APARTMENTS_BOOKINGS
(
	ID BIGINT,
	APARTMENT_ID BIGINT,
	GUEST_NAME VARCHAR NOT NULL,
	ARRIVAL DATETIME NOT NULL,
	DEPARTURE DATETIME NOT NULL,
	DAYS INT NOT NULL,
	CONSTRAINT APARTMENTS_BOOKINGS_PK
		PRIMARY KEY (ID)
);

CREATE TABLE HOTELS
(
	ID BIGINT,
	HALF_BOARD_PRICE INT NOT NULL,
	STARS INT NOT NULL,
	MAX_PERSONS INT NOT NULL,
	CONSTRAINT HOTELS_PK
		PRIMARY KEY (ID)
);

CREATE TABLE HOTELS_BOOKINGS
(
	ID BIGINT,
	HOTEL_ID BIGINT,
	GUEST_NAME VARCHAR NOT NULL,
	ARRIVAL DATETIME NOT NULL,
	DEPARTURE DATETIME NOT NULL,
	PERSONS_NUMBER INT NOT NULL,
	HALF_BOARD INT NOT NULL,
	DAYS INT NOT NULL,
	CONSTRAINT HOTELS_BOOKINGS_PK
		PRIMARY KEY (ID)
);


CREATE TABLE APARTMENTS_DAYS
(
	"DAYDATE" TIMESTAMP NOT NULL,
	"APARTMENT_ID" INT,
	"OCCUPIED" INT default TRUE not null,
	CONSTRAINT APARTMENTS_DAYS_PK
		UNIQUE ("DAYDATE", "APARTMENT_ID"),
	CONSTRAINT APARTMENTS_DAYS_APARTMENTS_ID_FK
		FOREIGN KEY ("APARTMENT_ID") REFERENCES APARTMENTS
);

CREATE TABLE HOTELS_DAYS ( "DAYDATE" TIMESTAMP, "HOTEL_ID" INT, "PERSONS_NUMBER" INT DEFAULT 0 NOT NULL, CONSTRAINT "HOTEL_DAYS_PK" PRIMARY KEY ("DAYDATE", "HOTEL_ID"));

ALTER TABLE APARTMENTS
	ADD CONSTRAINT APARTMENTS_ACCOMMODATIONS_ID_FK
		FOREIGN KEY (ID) REFERENCES ACCOMMODATIONS;

ALTER TABLE HOTELS
	ADD CONSTRAINT HOTELS_ACCOMMODATIONS_ID_FK
		FOREIGN KEY (ID) REFERENCES ACCOMMODATIONS;

ALTER TABLE APARTMENTS_BOOKINGS
	ADD CONSTRAINT APARATAMENTS_BOOKINGS_APARTMENTS_ID_FK
		FOREIGN KEY (APARTMENT_ID) REFERENCES APARTMENTS;

ALTER TABLE HOTELS_BOOKINGS
	ADD CONSTRAINT HOTELS_BOOKINGS_HOTELS_ID_FK
		FOREIGN KEY (HOTEL_ID) REFERENCES HOTELS;

ALTER TABLE HOTELS_DAYS
	ADD CONSTRAINT HOTELS_DAYS_HOTELS_ID_FK
		FOREIGN KEY (HOTEL_ID) REFERENCES HOTELS;

CREATE SEQUENCE HIBERNATE_SEQUENCE START WITH 1 INCREMENT BY 1;
